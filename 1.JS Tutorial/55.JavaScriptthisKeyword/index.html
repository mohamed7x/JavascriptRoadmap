<!DOCTYPE html>
<html>
<body>


<h1>The JavaScript this Keyword</h1>

<h3>Example</h3>
<pre>
const person = {
  firstName: "John",
  lastName : "Doe",
  id       : 5566,
  fullName : function() {
    return this.firstName + " " + this.lastName;
  }
};
</pre>

<h3>Output:</h3>
<div>
<p>In this example, <b>this</b> refers to the <b>person</b> object.</p>

<p>Because <b>fullName</b> is a method of the person object.</p>
<p id="demo"></p>
<script>
// Create an object:
const person = {
  firstName: "John",
  lastName: "Doe",
  id: 5566,
  fullName : function() {
return this.firstName + " " + this.lastName;
  }
};

// Display data from the object:
document.getElementById("demo").innerHTML = person.fullName();
</script>
</div>

<h2>What is this?</h2>
<p>
In JavaScript, the this keyword refers to an object.<br><br>

Which object depends on how this is being invoked (used or called).<br><br>

The this keyword refers to different objects depending on how it is used:
</p>

<p>
In an object method, this refers to the object.<br>

Alone, this refers to the global object.
<br>
In a function, this refers to the global object.<br>
In a function, in strict mode, this is undefined.<br>
In an event, this refers to the element that received the event.<br>
Methods like call(), apply(), and bind() can refer this to any object.
</p>

<p><b>Note: </b>
this is not a variable. It is a keyword. You cannot change the value of this.
</p>

<h2>this in a Method</h2>
<p>
When used in an object method, this refers to the object.<br>

In the example on top of this page, this refers to the person object.<br>

Because the fullName method is a method of the person object.
</p>
<pre>
fullName : function() {
  return this.firstName + " " + this.lastName;
}
</pre>
<h3>Output:</h3>
<div>
<p id="demo1"></p>
<script>
// Create an object:
const person01 = {
  firstName: "John",
  lastName: "Doe",
  id: 5566,
  fullName01 : function() {
return this.firstName + " " + this.lastName;
  }
};
// Display data from the object:
document.getElementById("demo1").innerHTML = person01.fullName01();
</script>
</div>

<h2>this Alone</h2>
<p>
When used alone, this refers to the global object.<br>

Because this is running in the global scope.<br>

In a browser window the global object is [object Window]:<br>
</p>

<h3>Example</h3>
<pre>let x = this;</pre>
<h3>Output</h3>
<div>
<p>In this example, <b>this</b> refers to the window object:</p>

<p id="demo3"></p>

<script>
let x = this;
document.getElementById("demo3").innerHTML = x;
</script>
</div>

<p>
 In strict mode, when used alone, this also refers to the global object:
</p>
<h3>
Example
</h3>
<pre>
"use strict";
let x = this;
</pre>
<h3>Output</h3>
<div>
<p id="demo4"></p>
<script>
"use strict";

let x4 = this;
document.getElementById("demo4").innerHTML = x4;
</script>
</div>

<h2>
this in a Function (Default)
</h2>
<p>

In a function, the global object is the default binding for this.<br>

In a browser window the global object is [object Window]:
</p>
<h3>Example</h3>
<pre>
function myFunction() {
  return this;
}
</pre>

<div>
<p id="demo5"></p>

<script>
document.getElementById("demo5").innerHTML = myFunction();

function myFunction() {
return this;
}
</script>
</div>

<h2>this in a Function (Strict)</h2>

<p>
JavaScript strict mode does not allow default binding.<br>

So, when used in a function, in strict mode, this is undefined.
</p>

<h3>Example</h3>
<pre>
"use strict";
function myFunction() {
  return this;
}
</pre>

<h3>Output:</h3>
<div>
<p>In a function, by default, <b>this</b> refers to the global object.</p>

<p>Strict mode does not allow default binding, so <b>this</b> is:</p>
<p id="demo6"></p>
<script>
"use strict";
document.getElementById("demo6").innerHTML = myFunction();

function myFunction() {
  return this;
}
</script>
</div>

<h2>this in Event Handlers</h2>

<p>In HTML event handlers, this refers to the HTML element that received the event:
</p>

<h3>Example</h3>
<pre>
< button onclick="this.style.display='none'">
  Click to Remove Me!
< /button>
</pre>
<h3>Output:</h3>
<button onclick="this.style.display='none'">
  Click to Remove Me!
</button>

<h2>Object Method Binding</h2>
<p>
In these examples, this is the person object:
</p>
<h3>Example</h3>
<pre>
const person = {
  firstName  : "John",
  lastName   : "Doe",
  id         : 5566,
  myFunction : function() {
    return this;
  }
};
</pre>
<h3>Output</h3>
<div>
<p>In this example, <b>this</b> refers to the <b>person object</b>.</p>

<p id="demo7"></p>

<script>
// Create an object:
const person7 = {
  firstName  : "John",
  lastName   : "Doe",
  id     : 5566,
  myFunction7 : function() {
    return this;
  }
};
// Display data from the object:
document.getElementById("demo7").innerHTML = person7.myFunction7();
</script>
</div>

<h3>Example</h3>
<pre>
const person = {
  firstName: "John",
  lastName : "Doe",
  id       : 5566,
  fullName : function() {
    return this.firstName + " " + this.lastName;
  }
};
</pre>
<h3>Output</h3>
<div>
<p>In this example, <b>this</b> refers to the <b>person</b> object.</p>
<p>Because <b>fullName</b> is a method of the person object.</p>

<p id="demo8"></p>

<script>
// Create an object:
const person8 = {
  firstName: "John",
  lastName: "Doe",
  id: 5566,
  fullName : function() {
    return this.firstName + " " + this.lastName;
  }
};

// Display data from the object:
document.getElementById("demo8").innerHTML = person8.fullName();
</script>
</div>
<p>i.e. this.firstName is the firstName property of this (the person object).</p>

<h2>Explicit Function Binding</h2>
<p>
The call() and apply() methods are predefined JavaScript methods.<br>

They can both be used to call an object method with another object as argument.
</p>

<p>
See Also:<br>
The Function call() Method<br>

The Function apply() Method<br>

The Function bind() Method<br>
</p>

<p>
The example below calls person1.fullName with person2 as an argument, this refers to person2, even if fullName is a method of person1:
</p>

<h3>example</h3>
<pre>
const person1 = {
  fullName: function() {
    return this.firstName + " " + this.lastName;
  }
}

const person2 = {
  firstName:"John",
  lastName: "Doe",
}

// Return "John Doe":
person1.fullName.call(person2);
</pre>
<h3>Output</h3>
<div>
<p>In this example <strong>this</strong> refers to person2, even if it is a method of person1:</p>

<p id="demo9"></p>
<script>
const person1 = {
  fullName: function() {
    return this.firstName + " " + this.lastName;
  }
}
const person2 = {
  firstName:"John",
  lastName: "Doe",
}

let x9 = person1.fullName.call(person2); 
document.getElementById("demo9").innerHTML = x9; 
</script>
</div>


<h2>Function Borrowing</h2>
<p>With the bind() method, an object can borrow a method from another object.

This example creates 2 objects (person and member).

The member object borrows the fullname method from the person object:
</p>


Example

<pre>
const person = {
  firstName:"John",
  lastName: "Doe",
  fullName: function () {
    return this.firstName + " " + this.lastName;
  }
}

const member = {
  firstName:"Hege",
  lastName: "Nilsen",
}

let fullName = person.fullName.bind(member);
</pre>

<h3>Output</h3>
<div>
<p>This example creates 2 objects (person and member).</p>
<p>The member object borrows the fullname method from person:</p> 

<p id="demo10"></p>
<script>
const person10 = {
  firstName:"John",
  lastName: "Doe",
  fullName: function() {
    return this.firstName + " " + this.lastName;
  }
}

const member = {
  firstName:"Hege",
  lastName: "Nilsen",
}
let fullName = person10.fullName.bind(member);

document.getElementById("demo10").innerHTML = fullName();
</script>
</div>

<h2>
This Precedence
</h2>
<p>

To determine which object this refers to; use the following precedence of order.
</p>

<table>
  <tr>
    <th>Precedence</th>
    <th>Object</th>
  </tr>
  <tr>
    <td> 1 </td>
    <td>bind()</td>
  <tr>
    <td> 2 </td>
    <td>apply() and call()
    </td>
  <tr>
    <td> 3 </td>
    <td>Object method</td>
  <tr>
    <td> 4 </td>
    <td>Global scope</td>
  </tr>
</table>

<p>
Is this in a function being called using bind()?<br><br>

Is this in a function being called using apply()?<br><br>

Is this in a function being called using call()?<br><br>

Is this in an object function (method)?
<br><br>
Is this in a function in the global scope.
</p>



</body>
</html>